import{t as l,v as n,a as d,b as o}from"./main-5bc21e7f.js";import"./header-state-d9f1b448.js";const{VITE_APP_SITE:u}={VITE_APP_SITE:"https://two023-dessert-webshop-json-server.onrender.com",VITE_APP_ADMIN_IDENTITY:"528491",BASE_URL:"/2023-Dessert-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};l()&&(location.href="index.html");const m=document.getElementById("account"),c=document.getElementById("password"),r=document.getElementById("submit"),a=document.querySelectorAll("input");a.forEach(e=>{e.addEventListener("input",t=>{n(t.target)})});r.addEventListener("click",E,!1);function E(){a.forEach(e=>n(e)),[...a].every(e=>n(e))&&f({email:m.value,password:c.value})}async function f(e){try{r.setAttribute("disabled",!0);const t=await d.post(`${u}/login`,e),{accessToken:s,user:i}=t.data;localStorage.setItem("token",s),localStorage.setItem("userData",JSON.stringify(i)),o("success",`歡迎您！${i.name}！`,"member.html#orders"),v(),r.removeAttribute("disabled")}catch(t){if(t.message==="Network Error")o("error","無法連接伺服器，請聯絡管理員");else{const{data:s}=t.response;s==="Incorrect password"?o("error","密碼錯誤"):s==="Cannot find user"&&o("error","用戶不存在"),c.value="",c.classList.remove("is-valid")}r.removeAttribute("disabled")}}function v(){a.forEach(e=>{e.value="",e.classList.remove("is-valid")})}
