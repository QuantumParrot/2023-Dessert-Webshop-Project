import{v as n,a as l,t as o,b as d}from"./main-050bd7e3.js";const{VITE_APP_SITE:u}={VITE_APP_SITE:"https://two023-dessert-webshop-json-server.onrender.com",VITE_APP_ADMIN_IDENTITY:"528491",BASE_URL:"/2023-Dessert-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function m(){d()&&(location.href="index.html")}m();const f=document.getElementById("account"),i=document.getElementById("password"),r=document.getElementById("submit"),a=document.querySelectorAll("input");a.forEach(e=>{e.addEventListener("input",t=>{n(t.target)},!1)});r.addEventListener("click",E,!1);function E(){a.forEach(e=>n(e)),[...a].every(e=>n(e))&&v({email:f.value,password:i.value})}async function v(e){try{r.setAttribute("disabled",!0);const t=await l.post(`${u}/login`,e);r.removeAttribute("disabled");const{accessToken:s,user:c}=t.data;localStorage.setItem("token",s),localStorage.setItem("userData",JSON.stringify(c)),o("success",`歡迎您！${c.name}！`,"member.html#orders"),I()}catch(t){if(t.message==="Network Error")o("error","無法連接伺服器，請聯絡管理員");else{const{data:s}=t.response;s==="Incorrect password"?o("error","密碼錯誤"):s==="Cannot find user"&&o("error","用戶不存在"),i.value="",i.classList.remove("is-valid")}r.removeAttribute("disabled")}}function I(){a.forEach(e=>{e.value="",e.classList.remove("is-valid")})}
