import{v as a,a as f,t as r,g as v}from"./main-78beb421.js";function E(){v()&&(location.href="index.html")}E();const{VITE_APP_SITE:p}={VITE_APP_SITE:"https://two023-dessert-webshop-json-server.onrender.com",VITE_APP_ADMIN_IDENTITY:"528491",BASE_URL:"/2023-Dessert-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},d=document.querySelector("#register-form"),g=document.getElementById("username"),b=document.getElementById("account"),l=document.getElementById("password"),h=document.getElementById("password-confirm"),n=document.getElementById("submit"),s=d.querySelectorAll("input");s.forEach(t=>{t.addEventListener("input",e=>{a(e.target),e.target.id==="password-confirm"&&u(e.target)},!1)});d.addEventListener("submit",I,!1);function I(t){t.preventDefault(),s.forEach(e=>a(e)),[...s].every(e=>a(e))&&u(h)&&w({email:b.value,password:l.value,name:g.value,role:"member"})}function u(t){const{id:e,value:o,classList:i}=t,m=document.querySelector(`[data-validation="${e}"]`);return o!==l.value?(i.remove("is-valid"),i.add("is-invalid"),m.textContent="兩次密碼不一致",!1):!0}function w(t){n.setAttribute("disabled",!0),f.post(`${p}/signup`,t).then(e=>{n.removeAttribute("disabled"),r("success","註冊成功！請登入","login.html"),c()}).catch(e=>{if(e.message==="Network Error")r("error","無法連接伺服器，請聯絡管理員");else{const{data:o}=e.response;o=="Email already exists"&&r("error","用戶已存在"),c()}n.removeAttribute("disabled")})}function c(){s.forEach(t=>{t.value="",t.classList.remove("is-valid")})}
