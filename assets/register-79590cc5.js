import{v as s,a as f,t as r,b as v}from"./main-36634dc1.js";function E(){v()&&(location.href="index.html")}E();const{VITE_APP_SITE:p}={VITE_APP_SITE:"https://two023-dessert-webshop-json-server.onrender.com",VITE_APP_ADMIN_IDENTITY:"528491",BASE_URL:"/2023-Dessert-Webshop-Project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},d=document.querySelector("#register-form"),h=document.getElementById("username"),b=document.getElementById("phone"),g=document.getElementById("account"),l=document.getElementById("password"),I=document.getElementById("password-confirm"),a=document.getElementById("submit"),o=d.querySelectorAll("input");o.forEach(t=>{t.addEventListener("input",e=>{e.target.id==="password-confirm"?u(e.target):s(e.target)},!1)});d.addEventListener("submit",y,!1);function y(t){t.preventDefault(),o.forEach(e=>s(e)),[...o].every(e=>s(e))&&u(I)&&w({phone:b.value,email:g.value,password:l.value,name:h.value.trim(),role:"member"})}function u(t){const{id:e,value:n,classList:i}=t,m=document.querySelector(`[data-validation="${e}"]`);return n!==l.value?(i.remove("is-valid"),i.add("is-invalid"),m.textContent="兩次密碼不一致",!1):s(t)}function w(t){a.setAttribute("disabled",!0),f.post(`${p}/signup`,t).then(e=>{r("success","註冊成功！請登入","login.html"),c(),a.removeAttribute("disabled")}).catch(e=>{if(e.message==="Network Error")r("error","無法連接伺服器，請聯絡管理員");else{const{data:n}=e.response;n=="Email already exists"&&r("error","用戶已存在"),c()}a.removeAttribute("disabled")})}function c(){o.forEach(t=>{t.value="",t.classList.remove("is-valid")})}
